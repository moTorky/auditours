!function (t, e, n) { "use strict"; function i(t, e) { var n = null; return function () { var i = this, r = arguments; null === n && (n = setTimeout(function () { t.apply(i, r), n = null }, e)) } } var r = function () { var t = {}; return function (e) { if (t[e] !== n) return t[e]; var i = document.createElement("div").style, r = e.charAt(0).toUpperCase() + e.slice(1), a = (e + " " + ["webkit", "moz", "ms", "o"].join(r + " ") + r).split(" "); for (var o in a) if (a[o] in i) return t[e] = a[o]; return t[e] = !1 } }(), a = "http://www.w3.org/2000/svg", o = function () { var t; return function () { if (t !== n) return t; var e = document.createElement("div"); return e.innerHTML = "<svg/>", t = e.firstChild && e.firstChild.namespaceURI === a } }(), s = t(e), l = r("transform"), c = { itemContainer: "ul", itemSelector: "li", start: "center", fadeIn: 400, loop: !1, autoplay: !1, pauseOnHover: !0, style: "coverflow", spacing: -.6, click: !0, keyboard: !0, scrollwheel: !0, touch: !0, nav: !1, buttons: !1, buttonPrev: "Previous", buttonNext: "Next", onItemSwitch: !1 }, u = { main: "flipster", active: "flipster--active", container: "flipster__container", nav: "flipster__nav", navChild: "flipster__nav__child", navItem: "flipster__nav__item", navLink: "flipster__nav__link", navCurrent: "flipster__nav__item--current", navCategory: "flipster__nav__item--category", navCategoryLink: "flipster__nav__link--category", button: "flipster__button", buttonPrev: "flipster__button--prev", buttonNext: "flipster__button--next", item: "flipster__item", itemCurrent: "flipster__item--current", itemPast: "flipster__item--past", itemFuture: "flipster__item--future", itemContent: "flipster__item__content" }, f = new RegExp("\\b(" + u.itemCurrent + "|" + u.itemPast + "|" + u.itemFuture + ")(.*?)(\\s|$)", "g"), p = new RegExp("\\s\\s+", "g"); t.fn.flipster = function (e) { if ("string" == typeof e) { var r = Array.prototype.slice.call(arguments, 1); return this.each(function () { var n = t(this).data("methods"); return n[e] ? n[e].apply(this, r) : this }) } var v = t.extend({}, c, e); return this.each(function () { function e(e) { return e = e || "next", t('<button class="' + u.button + " " + ("next" === e ? u.buttonNext : u.buttonPrev) + '" role="button" />').html(function (t) { var e = "next" === t ? v.buttonNext : v.buttonPrev; return "custom" !== v.buttons && o ? '<svg viewBox="0 0 13 20" xmlns="' + a + '" aria-labelledby="title"><title>' + e + '</title><polyline points="10,3 3,10 10,17"' + ("next" === t ? ' transform="rotate(180 6.5,10)"' : "") + "/></svg>" : e }(e)).on("click", function (t) { d(e), t.preventDefault() }) } function r() { T.css("transition", ""), w.css("transition", ""), I.css("transition", "") } function c(e) { e && (T.css("transition", "none"), w.css("transition", "none"), I.css("transition", "none")), C = w.width(), w.height(function () { var e, n = 0; return I.each(function () { (e = t(this).height()) > n && (n = e) }), n }()), C ? (k && (clearInterval(k), k = !1), I.each(function (n) { var i, a, o = t(this); o.attr("class", function (t, e) { return e && e.replace(f, "").replace(p, " ") }), i = o.outerWidth(), 0 !== v.spacing && o.css("margin-right", i * v.spacing + "px"), a = o.position().left, X[n] = -1 * (a + i / 2 - C / 2), n === I.length - 1 && (h(), e && setTimeout(r, 1)) })) : k = k || setInterval(function () { c(e) }, 500) } function h() { var e, i, r, a = I.length; I.each(function (n) { e = t(this), i = " ", n === j ? (i += u.itemCurrent, r = a + 1) : n < j ? (i += u.itemPast + " " + u.itemPast + "-" + (j - n), r = n) : (i += u.itemFuture + " " + u.itemFuture + "-" + (n - j), r = a - n), e.css("z-index", r).attr("class", function (t, e) { return e && e.replace(f, "").replace(p, " ") + i }) }), j >= 0 && (C && X[j] !== n || c(!0), l ? w.css("transform", "translateX(" + X[j] + "px)") : w.css({ left: X[j] + "px" })), function () { if (v.nav) { var e = P.data("flip-category"); D.removeClass(u.navCurrent), E.filter(function () { return t(this).data("index") === j || e && t(this).data("category") === e }).parent().addClass(u.navCurrent) } }() } function d(t) { var e = j; if (!(I.length <= 1)) return "prev" === t ? j > 0 ? j-- : v.loop && (j = I.length - 1) : "next" === t ? j < I.length - 1 ? j++ : v.loop && (j = 0) : "number" == typeof t ? j = t : t !== n && (j = I.index(t)), P = I.eq(j), j !== e && v.onItemSwitch && v.onItemSwitch.call(T, I[j], I[e]), h(), T } function m(t) { return v.autoplay = t || v.autoplay, clearInterval(M), M = setInterval(function () { var t = j; d("next"), t !== j || v.loop || clearInterval(M) }, v.autoplay), T } function g() { return clearInterval(M), M = 0, T } function _(t) { return g(), v.autoplay && t && (M = -1), T } function y() { c(!0), T.hide().css("visibility", "").addClass(u.active).fadeIn(v.fadeIn) } function b() { if (w = T.find(v.itemContainer).addClass(u.container), !((I = w.find(v.itemSelector)).length <= 1)) return I.addClass(u.item).each(function () { var e = t(this); e.children("." + u.itemContent).length || e.wrapInner('<div class="' + u.itemContent + '" />') }), v.click && I.on("click.flipster touchend.flipster", function (e) { N || (t(this).hasClass(u.itemCurrent) || e.preventDefault(), d(this)) }), v.buttons && I.length > 1 && (T.find("." + u.button).remove(), T.append(e("prev"), e("next"))), n = {}, !v.nav || I.length <= 1 || (L && L.remove(), L = t('<ul class="' + u.nav + '" role="navigation" />'), E = t(""), I.each(function (e) { var i = t(this), r = i.data("flip-category"), a = i.data("flip-title") || i.attr("title") || e, o = t('<a href="#" class="' + u.navLink + '">' + a + "</a>").data("index", e); if (E = E.add(o), r) { if (!n[r]) { var s = t('<li class="' + u.navItem + " " + u.navCategory + '">'), l = t('<a href="#" class="' + u.navLink + " " + u.navCategoryLink + '" data-flip-category="' + r + '">' + r + "</a>").data("category", r).data("index", e); n[r] = t('<ul class="' + u.navChild + '" />'), E = E.add(l), s.append(l, n[r]).appendTo(L) } n[r].append(o) } else L.append(o); o.wrap('<li class="' + u.navItem + '">') }), L.on("click", "a", function (e) { var n = t(this).data("index"); n >= 0 && (d(n), e.preventDefault()) }), "after" === v.nav ? T.append(L) : T.prepend(L), D = L.find("." + u.navItem)), j >= 0 && d(j), T; var n } var x, w, C, k, I, P, L, D, E, T = t(this), X = [], j = 0, M = !1, N = !1; x = { jump: d, next: function () { return d("next") }, prev: function () { return d("prev") }, play: m, stop: g, pause: _, index: b }, T.data("methods", x), T.hasClass(u.active) || function () { var t; if (T.css("visibility", "hidden"), b(), I.length <= 1) T.css("visibility", ""); else { t = !!v.style && "flipster--" + v.style.split(" ").join(" flipster--"), T.addClass([u.main, l ? "flipster--transform" : " flipster--no-transform", t, v.click ? "flipster--click" : ""].join(" ")), v.start && (j = "center" === v.start ? Math.floor(I.length / 2) : v.start), d(j); var e = T.find("img"); if (e.length) { var n = 0; e.on("load", function () { ++n >= e.length && y() }), setTimeout(y, 750) } else y(); s.on("resize.flipster", i(c, 400)), v.autoplay && m(), v.pauseOnHover && w.on("mouseenter.flipster", function () { M ? _(!0) : g() }).on("mouseleave.flipster", function () { -1 === M && m() }), function (t) { v.keyboard && (t[0].tabIndex = 0, t.on("keydown.flipster", i(function (t) { var e = t.which; 37 !== e && 39 !== e || (d(37 === e ? "prev" : "next"), t.preventDefault()) }, 250))) }(T), function (t) { if (v.scrollwheel) { var e, n, r = !1, a = 0, o = 0, l = 0, c = /mozilla/.test(navigator.userAgent.toLowerCase()) && !/webkit/.test(navigator.userAgent.toLowerCase()); t.on("mousewheel.flipster wheel.flipster", function () { r = !0 }).on("mousewheel.flipster wheel.flipster", i(function (t) { clearTimeout(o), o = setTimeout(function () { a = 0, l = 0 }, 300), t = t.originalEvent, l += t.wheelDelta || -1 * (t.deltaY + t.deltaX), Math.abs(l) < 25 && !c || (a++ , n !== (e = l > 0 ? "prev" : "next") && (a = 0), n = e, (a < 6 || a % 3 == 0) && d(e), l = 0) }, 50)), s.on("mousewheel.flipster wheel.flipster", function (t) { r && (t.preventDefault(), r = !1) }) } }(w), function (t) { if (v.touch) { var e, n, r, a, o = !1, s = i(d, 300); t.on({ "touchstart.flipster": function (t) { t = t.originalEvent, N = t.touches ? t.touches[0].clientX : t.clientX, o = t.touches ? t.touches[0].clientY : t.clientY }, "touchmove.flipster": i(function (t) { !1 !== N && (t = t.originalEvent, e = t.touches ? t.touches[0].clientX : t.clientX, n = t.touches ? t.touches[0].clientY : t.clientY, r = n - o, a = e - N, Math.abs(r) < 100 && Math.abs(a) >= 30 && (s(a < 0 ? "next" : "prev"), N = e, t.preventDefault())) }, 100), "touchend.flipster touchcancel.flipster ": function () { N = !1 } }) } }(w) } }() }) } }(jQuery, window);